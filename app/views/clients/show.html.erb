<style>
    #panel {
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
    }

        /*Fix bug Twitter Bootstrap CSS affecting Google Maps*/
    #map-canvas img {
        max-width: none;
    }
</style>

<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyC7icpVNHCpzkJjilXkACn8VG9HlSe0u3s&sensor=false"></script>
<script>
    var geocoder;
    var map;
    //      var infowindow = new google.maps.InfoWindow();

    function initialize() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(21.0333333, 105.85000000000002);
        var mapOptions = {
            zoom: 8,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
        codeAddress();
    }

    function codeAddress() {
        var address ="<%= @client.address %>";
        if (address == null || address ==''){
            return;
        }
        geocoder.geocode({ 'address': address}, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                    map: map,
                    position: results[0].geometry.location
                });
//                  infowindow.setContent({
//                      content: 'Latitude: ' + results[0].geometry.location +
//                              '<br>Longitude: ' + results[0].geometry.location
//                  });
                var infowindow = new google.maps.InfoWindow({
                    content: 'Latitude: ' + results[0].geometry.location.lat() +
                            '<br>Longitude: ' + results[0].geometry.location.lng()
                });
                infowindow.open(map, marker);

            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }
        });
    }

    google.maps.event.addDomListener(window, 'load', initialize);
</script>
<p id="notice"><%= notice %></p>

<p>
  <b>Name:</b>
  <%= @client.name %>
</p>

<p>
  <b>Phone:</b>
  <%= @client.phone %>
</p>

<p>
  <b>Email:</b>
  <%= @client.email %>
</p>

<p>
  <b>Country:</b>
  <%= @client.country %>
</p>

<p>
  <b>City:</b>
  <%= @client.city %>
</p>

<p>
  <b>Address:</b>
  <%= @client.address %>
<div id="map-canvas" style="width:500px;height:380px;"></div>
</p>

<p>
  <b>Age:</b>
  <%= @client.age %>
</p>

<p>
  <b>Sex:</b>
  <%= @client.sex %>
</p>


<%= link_to 'Edit', edit_client_path(@client) %> |
<%= link_to 'Back', clients_path %>
